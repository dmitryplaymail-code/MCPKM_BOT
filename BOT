from telegram import Update, InlineKeyboardButton, InlineKeyboardMarkup
from telegram.ext import Application, CommandHandler, MessageHandler, filters, CallbackQueryHandler

async def start(update: Update, context):
    user = update.effective_user
    # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –≥–ª–∞–≤–Ω–æ–≥–æ –º–µ–Ω—é
    keyboard = [
        [InlineKeyboardButton("üìù –ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è", callback_data='register')],
        [InlineKeyboardButton("üìÅ –ú–∞—Ç–µ—Ä–∏–∞–ª—ã –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è", callback_data='files')],
        [InlineKeyboardButton("‚ùì –ó–∞–¥–∞—Ç—å –≤–æ–ø—Ä–æ—Å –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä—É", callback_data='ask_question')],
        [InlineKeyboardButton("üë§ –ú–æ—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è", callback_data='my_info')],
    ]
    reply_markup = InlineKeyboardMarkup(keyboard)
    await update.message.reply_text(
        f"–ü—Ä–∏–≤–µ—Ç, {user.first_name}!\n"
        f"–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –±–æ—Ç –º–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è ¬´–î–µ–Ω—å –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏¬ª.\n"
        f"–í—ã–±–µ—Ä–∏—Ç–µ –¥–µ–π—Å—Ç–≤–∏–µ:",
        reply_markup=reply_markup
    )

# –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è callback_data (–Ω–∞–∂–∞—Ç–∏–π –Ω–∞ –∫–Ω–æ–ø–∫–∏ –º–µ–Ω—é)
async def button_handler(update: Update, context):
    query = update.callback_query
    await query.answer()

    if query.data == 'register':
        # –ó–∞–ø—É—Å–∫–∞–µ–º –ø—Ä–æ—Ü–µ—Å—Å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏
        await query.edit_message_text(text="–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ –§–ò–û:")
        # ... –ª–æ–≥–∏–∫–∞ –ø–æ—à–∞–≥–æ–≤–æ–≥–æ –æ–ø—Ä–æ—Å–∞ ...
    elif query.data == 'files':
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏ —Å —Ñ–∞–π–ª–∞–º–∏
        file_keyboard = [
            [InlineKeyboardButton("–ü—Ä–æ–≥—Ä–∞–º–º–∞ (PDF)", callback_data='file_program')],
            [InlineKeyboardButton("–ü—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏—è (PPTX)", callback_data='file_presentation')],
        ]
        # ... –∏ —Ç.–¥.
